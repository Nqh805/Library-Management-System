<!DOCTYPE html>
<html lang="vi">
    <head>
        {# ========================================================= #}
        {# HEAD SECTION #}
        {# Ch·ª©a c√°c th√¥ng tin meta, ti√™u ƒë·ªÅ trang, link CSS v√† icon. #}
        {# ========================================================= #}
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        {# Ti√™u ƒë·ªÅ trang, c√≥ th·ªÉ ƒë∆∞·ª£c ghi ƒë√® b·ªüi c√°c template con s·ª≠ d·ª•ng block title #}
        <title>{% block title %}H·ªá Th·ªëng Qu·∫£n L√Ω Th∆∞ Vi·ªán{% endblock %}</title>
        {# Th·∫ª meta ch·ª©a CSRF token, ƒë∆∞·ª£c JavaScript s·ª≠ d·ª•ng ƒë·ªÉ g·ª≠i k√®m trong c√°c request AJAX POST/PUT/DELETE #}
        <meta name="csrf-token" content="{{ csrf_token() }}" />
        {# Link CSS c·ªßa Bootstrap 5 #}
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
        {# Link CSS c·ªßa Font Awesome (cho c√°c icon) #}
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
        {# Link CSS c·ªßa TomSelect (th∆∞ vi·ªán t·∫°o dropdown n√¢ng cao) - theme Bootstrap 5 #}
        <link href="https://cdn.jsdelivr.net/npm/tom-select@2.3.1/dist/css/tom-select.bootstrap5.min.css" rel="stylesheet" />
        {# Link favicon c·ªßa trang web #}
        <link rel="icon" href="{{ url_for('static', filename='favicon.png') }}" />
        {# CSS #}
        <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    </head>

    <body>
        {# ========================================================= #}
        {# THANH ƒêI·ªÄU H∆Ø·ªöNG (Navbar) #}
        {# S·ª≠ d·ª•ng Bootstrap Navbar, hi·ªÉn th·ªã c√°c menu kh√°c nhau t√πy theo #}
        {# tr·∫°ng th√°i ƒëƒÉng nh·∫≠p v√† vai tr√≤ ng∆∞·ªùi d√πng (Admin/ƒê·ªôc gi·∫£). #}
        {# ========================================================= #}
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
            <div class="container-fluid">
                {# Logo/Link trang ch·ªß - Tr·ªè v·ªÅ dashboard n·∫øu l√† admin, ng∆∞·ª£c l·∫°i v·ªÅ index #}
                <a class="navbar-brand" href="{{ url_for('admin.admin_dashboard') if current_user.is_authenticated and current_user.vai_tro == 'quan_ly' else url_for('core.index') }}">
                    Th∆∞ Vi·ªán
                </a>
                {# N√∫t b·∫•m cho menu tr√™n m√†n h√¨nh nh·ªè #}
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                {# N·ªôi dung menu ch√≠nh #}
                <div class="collapse navbar-collapse" id="navbarNav">
                    {# Menu b√™n tr√°i (ch·ª©c nƒÉng ch√≠nh) #}
                    <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                        {% if current_user.is_authenticated %} {# Ch·ªâ hi·ªÉn th·ªã n·∫øu ƒë√£ ƒëƒÉng nh·∫≠p #}
                            {% if current_user.vai_tro == 'quan_ly' %} {# Menu cho Admin #}
                                <li class="nav-item"><a class="nav-link" href="{{ url_for('admin.admin_dashboard') }}">üìä B·∫£ng ƒêi·ªÅu Khi·ªÉn</a></li>
                                <li class="nav-item"><a class="nav-link" href="{{ url_for('admin.quan_ly_sach') }}">üìö Qu·∫£n L√Ω S√°ch</a></li>
                                <li class="nav-item"><a class="nav-link" href="{{ url_for('admin.quan_ly_thanhvien') }}">üë§ Qu·∫£n L√Ω Th√†nh Vi√™n</a></li>
                                <li class="nav-item"><a class="nav-link" href="{{ url_for('admin.quan_ly_muontra') }}">üîÑ Qu·∫£n L√Ω M∆∞·ª£n/Tr·∫£</a></li>
                                <li class="nav-item"><a class="nav-link" href="{{ url_for('admin.admin_settings') }}">‚öôÔ∏è C√†i ƒê·∫∑t</a></li>
                            {% else %} {# Menu cho ƒê·ªôc gi·∫£ #}
                                <li class="nav-item"><a class="nav-link" href="{{ url_for('core.danh_sach_sach') }}">üîç Tra C·ª©u S√°ch</a></li>
                            {% endif %}
                        {% endif %}
                    </ul>
                    {# Menu b√™n ph·∫£i (th√¥ng tin ng∆∞·ªùi d√πng/ƒëƒÉng nh·∫≠p) #}
                    <ul class="navbar-nav">
                        {% if current_user.is_authenticated %} {# N·∫øu ƒë√£ ƒëƒÉng nh·∫≠p #}
                            <li class="nav-item dropdown">
                                {# Dropdown hi·ªÉn th·ªã avatar, t√™n v√† c√°c t√πy ch·ªçn h·ªì s∆°/ƒëƒÉng xu·∫•t #}
                                <a class="nav-link dropdown-toggle d-flex align-items-center" href="#" id="navbarDropdownMenuLink" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                    {# Hi·ªÉn th·ªã avatar (l·∫•y t·ª´ current_user), d√πng ·∫£nh default n·∫øu kh√¥ng c√≥ #}
                                    <img src="{{ url_for('static', filename='uploads/avatars/' ~ (current_user.avatar | default('default_avatar.png'))) }}" alt="Avatar" width="30" height="30" class="rounded-circle me-2" style="object-fit: cover"/>
                                    <span>Ch√†o, {{ current_user.ho_ten }}</span> {# Hi·ªÉn th·ªã t√™n ng∆∞·ªùi d√πng #}
                                </a>
                                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdownMenuLink">
                                    <li><a class="dropdown-item" href="{{ url_for('profile.profile') }}"><i class="fas fa-user-edit me-2"></i> H·ªì S∆° C·ªßa T√¥i</a></li>
                                    <li><hr class="dropdown-divider" /></li>
                                    <li><a class="dropdown-item text-danger" href="{{ url_for('auth.logout') }}"><i class="fas fa-sign-out-alt me-2"></i> ƒêƒÉng Xu·∫•t</a></li>
                                </ul>
                            </li>
                        {% else %} {# N·∫øu ch∆∞a ƒëƒÉng nh·∫≠p #}
                            <li class="nav-item"><a class="nav-link" href="{{ url_for('auth.login') }}">ƒêƒÉng Nh·∫≠p</a></li>
                            <li class="nav-item"><a class="nav-link" href="{{ url_for('auth.register') }}">ƒêƒÉng K√Ω</a></li>
                        {% endif %}
                    </ul>
                </div>
            </div>
        </nav>

        {# ========================================================= #}
        {# V√ôNG N·ªòI DUNG CH√çNH #}
        {# Ch·ª©a n·ªôi dung c·ª• th·ªÉ c·ªßa t·ª´ng trang con, ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a #}
        {# trong block 'content' c·ªßa c√°c template k·∫ø th·ª´a. #}
        {# C≈©ng ch·ª©a logic hi·ªÉn th·ªã Flash Messages. #}
        {# ========================================================= #}
        <div class="container mt-4">
            {# --- Hi·ªÉn th·ªã Flash Messages --- #}
            {# L·∫•y c√°c flash message t·ª´ Flask #}
            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %} {# Ch·ªâ ch·∫°y script n·∫øu c√≥ message #}
                    <script>
                        // Ch·ªù DOM t·∫£i xong m·ªõi th·ª±c thi script
                        document.addEventListener('DOMContentLoaded', function () {
                            {% for category, message in messages %} {# L·∫∑p qua c√°c message #}
                                // G·ªçi h√†m showNotification (ƒë·ªãnh nghƒ©a ·ªü d∆∞·ªõi) ƒë·ªÉ hi·ªÉn th·ªã toast
                                // D√πng filter | tojson ƒë·ªÉ ƒë·∫£m b·∫£o message ƒë∆∞·ª£c truy·ªÅn an to√†n v√†o JavaScript
                                showNotification({{ message | tojson }}, "{{ category }}");
                            {% endfor %}
                        });
                    </script>
                {% endif %}
            {% endwith %}
            {# --- Block Content --- #}
            {# N∆°i n·ªôi dung c·ªßa c√°c trang con s·∫Ω ƒë∆∞·ª£c ch√®n v√†o #}
            {% block content %}{% endblock %}
        </div> {# K·∫øt th√∫c container #}

        {# ========================================================= #}
        {# TOAST CONTAINER #}
        {# V√πng ch·ª©a c√°c th√¥ng b√°o Toast s·∫Ω xu·∫•t hi·ªán ·ªü g√≥c d∆∞·ªõi b√™n ph·∫£i. #}
        {# ƒê∆∞·ª£c ƒëi·ªÅu khi·ªÉn b·ªüi h√†m JavaScript showNotification. #}
        {# ========================================================= #}
        <div class="toast-container position-fixed bottom-0 end-0 p-3"></div>

        {# ========================================================= #}
        {# FOOTER #}
        {# Ph·∫ßn ch√¢n trang, ƒë∆∞·ª£c ƒë·∫©y xu·ªëng d∆∞·ªõi c√πng nh·ªù Flexbox. #}
        {# ========================================================= #}
        <footer class="bg-dark text-white text-center p-3 mt-auto"> {# mt-auto ƒë·∫©y footer xu·ªëng #}
            <div class="container">
                <p class="mb-0 small">¬© 2025 - H·ªá Th·ªëng Qu·∫£n L√Ω Th∆∞ Vi·ªán</p>
            </div>
        </footer>

        {# ========================================================= #}
        {# LINK JAVASCRIPT #}
        {# Nh√∫ng c√°c th∆∞ vi·ªán JS c·∫ßn thi·∫øt (Bootstrap, TomSelect). #}
        {# ========================================================= #}
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/tom-select@2.3.1/dist/js/tom-select.complete.min.js"></script>

        {# ========================================================= #}
        {# KH·ªêI SCRIPT CHUNG #}
        {# Ch·ª©a c√°c h√†m JavaScript d√πng chung tr√™n nhi·ªÅu trang. #}
        {# ========================================================= #}
        <script>
            /**
             * Hi·ªÉn th·ªã th√¥ng b√°o d·∫°ng Toast c·ªßa Bootstrap.
             * @param {string} message - N·ªôi dung th√¥ng b√°o.
             * @param {string} [type="info"] - Lo·∫°i th√¥ng b√°o ('success', 'danger', 'warning', 'info', etc.).
             */
            function showNotification(message, type = "info") {
                const toastContainer = document.querySelector(".toast-container"); // T√¨m v√πng ch·ª©a toast
                if (!toastContainer) { // X·ª≠ l√Ω n·∫øu kh√¥ng t√¨m th·∫•y container
                    console.error("Kh√¥ng t√¨m th·∫•y .toast-container ƒë·ªÉ hi·ªÉn th·ªã th√¥ng b√°o.");
                    alert(`[${type.toUpperCase()}] ${message}`); // Hi·ªÉn th·ªã alert d·ª± ph√≤ng
                    return;
                }
                const toastId = "toast-" + Date.now(); // T·∫°o ID duy nh·∫•t cho m·ªói toast
                // X√°c ƒë·ªãnh class m√†u n·ªÅn d·ª±a tr√™n lo·∫°i th√¥ng b√°o
                let bgClass = "text-bg-secondary"; // M·∫∑c ƒë·ªãnh
                if (type === "success") bgClass = "text-bg-success";
                else if (type === "danger" || type === "error") bgClass = "text-bg-danger";
                else if (type === "warning") bgClass = "text-bg-warning";
                else if (type === "info") bgClass = "text-bg-info";

                // T·∫°o chu·ªói HTML cho toast
                const toastHtml = `
                <div id="${toastId}" class="toast align-items-center ${bgClass} border-0" role="alert" aria-live="assertive" aria-atomic="true" data-bs-delay="5000"> {# T·ª± ·∫©n sau 5 gi√¢y #}
                    <div class="d-flex">
                        <div class="toast-body">${message}</div>
                        <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
                    </div>
                </div>`;
                // Th√™m toast v√†o container
                toastContainer.insertAdjacentHTML("beforeend", toastHtml);
                // L·∫•y element toast v·ª´a th√™m v√† hi·ªÉn th·ªã n√≥ b·∫±ng Bootstrap API
                const toastEl = document.getElementById(toastId);
                if (toastEl) {
                    const toast = new bootstrap.Toast(toastEl);
                    toast.show();
                    // L·∫Øng nghe s·ª± ki·ªán 'hidden.bs.toast' ƒë·ªÉ x√≥a element kh·ªèi DOM sau khi toast ƒë√£ ·∫©n ho√†n to√†n
                    toastEl.addEventListener("hidden.bs.toast", () => toastEl.remove());
                }
            } // K·∫øt th√∫c showNotification

            /**
             * L·∫•y gi√° tr·ªã CSRF token t·ª´ th·∫ª meta trong <head>.
             * @returns {string|null} Gi√° tr·ªã token ho·∫∑c null n·∫øu kh√¥ng t√¨m th·∫•y.
             */
            function getCsrfToken() {
                const meta = document.querySelector('meta[name="csrf-token"]');
                return meta ? meta.getAttribute("content") : null;
            } // K·∫øt th√∫c getCsrfToken

            /**
             * Kh·ªüi t·∫°o ch·ª©c nƒÉng Th√™m/B·ªè y√™u th√≠ch cho c√°c n√∫t c√≥ class '.btn-toggle-favorite'.
             * G·ª≠i request AJAX POST ƒë·∫øn API ƒë·ªÉ c·∫≠p nh·∫≠t tr·∫°ng th√°i.
             * C·∫≠p nh·∫≠t giao di·ªán n√∫t (th√™m/x√≥a class 'is-favorite' cho icon tr√°i tim).
             */
            function initializeFavoriteButtons() {
                const favButtons = document.querySelectorAll(".btn-toggle-favorite"); // T√¨m t·∫•t c·∫£ n√∫t y√™u th√≠ch
                const csrfToken = getCsrfToken(); // L·∫•y token m·ªôt l·∫ßn

                favButtons.forEach((button) => {
                    // B·ªè qua c√°c n√∫t trong tab y√™u th√≠ch c·ªßa trang profile (#yeu-thich-pane)
                    // v√¨ trang profile c√≥ logic x·ª≠ l√Ω x√≥a h√†ng ri√™ng bi·ªát.
                    if (button.closest("#yeu-thich-pane")) { return; }

                    // G·∫Øn s·ª± ki·ªán click cho m·ªói n√∫t
                    button.addEventListener("click", async function (e) {
                        e.preventDefault(); // NgƒÉn h√†nh vi m·∫∑c ƒë·ªãnh (vd: click link th·∫ª s√°ch)
                        e.stopPropagation(); // NgƒÉn s·ª± ki·ªán lan ra th·∫ª cha

                        const sachId = this.dataset.id; // L·∫•y ID s√°ch t·ª´ data-id
                        const icon = this.querySelector(".fa-heart"); // T√¨m icon tr√°i tim b√™n trong
                        if (!sachId || !icon) return; // Tho√°t n·∫øu thi·∫øu th√¥ng tin

                        this.disabled = true; // V√¥ hi·ªáu h√≥a n√∫t t·∫°m th·ªùi

                        try {
                            // --- G·ªçi API b·∫±ng Fetch API ---
                            const response = await fetch(
                                `/api/sach/toggle-favorite/${sachId}`, // URL API
                                {
                                    method: "POST", // Ph∆∞∆°ng th·ª©c POST
                                    headers: { "X-CSRFToken": csrfToken } // G·ª≠i k√®m CSRF token
                                }
                            );
                            const data = await response.json(); // ƒê·ªçc ph·∫£n h·ªìi JSON

                            if (response.ok && data.success) { // N·∫øu request th√†nh c√¥ng
                                // C·∫≠p nh·∫≠t class 'is-favorite' cho icon d·ª±a tr√™n ph·∫£n h·ªìi
                                icon.classList.toggle("is-favorite", data.is_favorite);
                                // Hi·ªÉn th·ªã th√¥ng b√°o th√†nh c√¥ng
                                showNotification(data.message, data.is_favorite ? "success" : "info");
                            } else {
                                // N·∫øu c√≥ l·ªói t·ª´ server -> n√©m l·ªói
                                throw new Error(data.error || "L·ªói kh√¥ng x√°c ƒë·ªãnh t·ª´ server.");
                            }
                        } catch (error) {
                            // X·ª≠ l√Ω l·ªói (m·∫°ng ho·∫∑c logic)
                            console.error("L·ªói khi thay ƒë·ªïi y√™u th√≠ch:", error);
                            showNotification(`L·ªói: ${error.message}`, "danger"); // Hi·ªÉn th·ªã l·ªói
                        } finally {
                            // Lu√¥n k√≠ch ho·∫°t l·∫°i n√∫t sau khi x·ª≠ l√Ω xong
                            this.disabled = false;
                        }
                    }); // K·∫øt th√∫c event listener click
                }); // K·∫øt th√∫c forEach button
            } // K·∫øt th√∫c initializeFavoriteButtons

            /**
             * Kh·ªüi t·∫°o th∆∞ vi·ªán TomSelect cho m·ªôt th·∫ª <select>.
             * @param {string} selectId - CSS selector c·ªßa th·∫ª select (vd: '#mySelect').
             * @param {object} [options={}] - C√°c t√πy ch·ªçn b·ªï sung cho TomSelect (vd: { create: true }).
             */
            function initializeSearchableSelect(selectId, options = {}) {
                const el = document.querySelector(selectId); // T√¨m element select
                if (el) {
                    // C√°c t√πy ch·ªçn m·∫∑c ƒë·ªãnh cho TomSelect
                    const defaultOptions = {
                        create: false, // M·∫∑c ƒë·ªãnh kh√¥ng cho ph√©p t·∫°o option m·ªõi
                        sortField: { field: "text", direction: "asc" } // S·∫Øp x·∫øp option theo text
                    };
                    // Kh·ªüi t·∫°o TomSelect, k·∫øt h·ª£p options m·∫∑c ƒë·ªãnh v√† options truy·ªÅn v√†o
                    new TomSelect(el, { ...defaultOptions, ...options });
                } else {
                     console.warn(`TomSelect: Element '${selectId}' not found.`); // C·∫£nh b√°o n·∫øu kh√¥ng t√¨m th·∫•y select
                }
            } // K·∫øt th√∫c initializeSearchableSelect

            /**
             * Kh·ªüi t·∫°o ch·ª©c nƒÉng Live Search (t√¨m ki·∫øm t·ª©c th√¨ khi g√µ) cho m·ªôt √¥ input.
             * @param {string} inputId - ID c·ªßa √¥ input t√¨m ki·∫øm.
             * @param {string} resultsId - ID c·ªßa div dropdown hi·ªÉn th·ªã k·∫øt qu·∫£.
             */
            function initializeLiveSearch(inputId, resultsId) {
                const searchInput = document.getElementById(inputId); // √î input
                const resultsDropdown = document.getElementById(resultsId); // Dropdown k·∫øt qu·∫£
                if (!searchInput || !resultsDropdown) return; // D·ª´ng n·∫øu thi·∫øu element

                let debounceTimer; // Bi·∫øn ƒë·ªÉ tr√¨ ho√£n vi·ªác g·ª≠i request (debouncing)

                // --- H√†m g·ªçi API t√¨m ki·∫øm ---
                async function fetchResults(query) {
                    if (query.length < 2) { // Ch·ªâ t√¨m khi c√≥ √≠t nh·∫•t 2 k√Ω t·ª±
                        resultsDropdown.classList.remove("show"); // ·∫®n dropdown
                        return;
                    }
                    try {
                        // G·ªçi API /api/live-search-sach v·ªõi tham s·ªë q=query
                        const response = await fetch(`/api/live-search-sach?q=${encodeURIComponent(query)}`);
                        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                        const data = await response.json(); // ƒê·ªçc k·∫øt qu·∫£ JSON
                        renderResults(data); // Hi·ªÉn th·ªã k·∫øt qu·∫£
                    } catch (error) {
                        console.error("L·ªói live search:", error);
                        resultsDropdown.classList.remove("show"); // ·∫®n dropdown n·∫øu l·ªói
                    }
                }

                // --- H√†m hi·ªÉn th·ªã k·∫øt qu·∫£ v√†o dropdown ---
                function renderResults(data) {
                    resultsDropdown.innerHTML = ""; // X√≥a k·∫øt qu·∫£ c≈©
                    if (!Array.isArray(data) || data.length === 0) { // N·∫øu kh√¥ng c√≥ k·∫øt qu·∫£
                        resultsDropdown.innerHTML = '<span class="dropdown-item text-muted">Kh√¥ng t√¨m th·∫•y k·∫øt qu·∫£.</span>';
                    } else {
                        // T·∫°o HTML cho t·ª´ng m·ª•c k·∫øt qu·∫£
                        data.forEach((sach) => {
                            const bookItem = `
                            <a class="dropdown-item search-result-item" href="/sach/${sach.id_sach}/${sach.slug}"> {# Link ƒë·∫øn trang chi ti·∫øt s√°ch #}
                                <img src="/static/uploads/covers/${sach.anh_bia || "default_cover.jpg"}" alt="${sach.tieu_de}" class="search-item-img"> {# ·∫¢nh b√¨a #}
                                <div class="search-item-info"> {# Th√¥ng tin s√°ch #}
                                    <div class="search-item-title">${sach.tieu_de}</div>
                                    <div class="search-item-author">T√°c gi·∫£: ${sach.ten_tac_gia || "N/A"}</div>
                                    <div class="search-item-borrows"><i class="fas fa-book-reader fa-xs"></i> ${sach.luot_muon} l∆∞·ª£t m∆∞·ª£n</div>
                                </div>
                            </a>`;
                            resultsDropdown.insertAdjacentHTML('beforeend', bookItem); // Th√™m v√†o dropdown
                        });
                    }
                    resultsDropdown.classList.add("show"); // Hi·ªÉn th·ªã dropdown
                }

                // --- G·∫Øn s·ª± ki·ªán ---
                // S·ª± ki·ªán 'keyup': K√≠ch ho·∫°t t√¨m ki·∫øm sau khi ng∆∞·ªùi d√πng ng·ª´ng g√µ 300ms (debouncing)
                searchInput.addEventListener("keyup", (e) => {
                    clearTimeout(debounceTimer); // X√≥a timer c≈©
                    debounceTimer = setTimeout(() => { // ƒê·∫∑t timer m·ªõi
                        fetchResults(searchInput.value);
                    }, 300); // Ch·ªù 300ms
                });

                // S·ª± ki·ªán 'click' tr√™n document: ·∫®n dropdown n·∫øu click ra ngo√†i √¥ input v√† dropdown
                document.addEventListener("click", (e) => {
                    if (!searchInput.contains(e.target) && !resultsDropdown.contains(e.target)) {
                        resultsDropdown.classList.remove("show");
                    }
                });

                // S·ª± ki·ªán 'focus': Hi·ªÉn th·ªã l·∫°i k·∫øt qu·∫£ (n·∫øu c√≥) khi focus v√†o √¥ input
                searchInput.addEventListener("focus", () => {
                    if (searchInput.value.length >= 2) {
                        fetchResults(searchInput.value);
                    }
                });
            } // K·∫øt th√∫c initializeLiveSearch
        </script>

        {# ========================================================= #}
        {# BLOCK SCRIPTS (cho c√°c trang con) #}
        {# N∆°i c√°c template con c√≥ th·ªÉ ch√®n th√™m m√£ JavaScript ri√™ng. #}
        {# ========================================================= #}
        {% block scripts %}{% endblock %}
    </body>
</html>